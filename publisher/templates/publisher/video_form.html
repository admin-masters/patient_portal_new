{% extends "base.html" %}
{% block title %}{{ page_title }}{% endblock %}
{% block header_title %}{{ page_title }}{% endblock %}

{% block content %}
<div class="card">
  <h2>{{ page_title }}</h2>

  <form method="post">
    {% csrf_token %}
    {{ form.as_p }}

    {% if formset.non_form_errors %}
      <div class="message error">{{ formset.non_form_errors|striptags }}</div>
    {% endif %}

    <h3>Language Details (all languages required)</h3>

    {{ formset.management_form }}
    <table>
      <tr>
        <th>Language Code</th>
        <th>Title</th>
        <th>YouTube URL</th>
      </tr>

      {% for f in formset.forms %}
        <tr>
          <td>{{ f.language_code }}</td>
          <td>
            {{ f.title }}
            {% if f.title.errors %}<div class="message error">{{ f.title.errors|striptags }}</div>{% endif %}
          </td>
          <td>
            {{ f.youtube_url }}
            {% if f.youtube_url.errors %}<div class="message error">{{ f.youtube_url.errors|striptags }}</div>{% endif %}
          </td>
        </tr>
      {% endfor %}
    </table>

    <button type="submit">Save</button>
    <a href="{% url 'publisher:video_list' %}">Cancel</a>
  </form>
</div>
{% endblock %}
